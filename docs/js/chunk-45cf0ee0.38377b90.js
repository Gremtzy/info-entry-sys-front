(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45cf0ee0"],{"4eac":function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return l}));var o=i("da71"),n=i("9067"),r=function(e){return Object(n["a"])({method:"post",url:o["a"]+"/app/region/create",data:e})},s=function(e){return Object(n["a"])({method:"post",url:o["a"]+"/app/region/pageByCondition",data:e})},a=function(e){return Object(n["a"])({method:"put",url:o["a"]+"/app/region/updateById",data:e})},l=function(e){return Object(n["a"])({method:"DELETE",url:o["a"]+"/app/region/deleteById/"+e,data:e})}},5273:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"roles_content"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v("系统管理")]),i("el-breadcrumb-item",[e._v("地域管理")])],1),i("el-card",[i("el-form",{ref:"queryRoleRef",staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini","label-position":"right",model:e.formOptions}},[i("el-row",[i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"地域名称"}},[i("el-input",{attrs:{placeholder:"请输入地域名称"},model:{value:e.formOptions.regionName,callback:function(t){e.$set(e.formOptions,"regionName",t)},expression:"formOptions.regionName"}})],1)],1),i("el-col",{class:Object.keys(e.formOptions).length%3===0?"nextline_action_button_content":Object.keys(e.formOptions).length%3===1?"inline2_action_button_content":"inline1_action_button_content",attrs:{span:19}},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.queryRoles}},[e._v("查询")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addClick}},[e._v("新增")])],1)],1)],1)],1)],1),i("el-card",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",stripe:"",size:"mini",height:"550"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{label:"序号",type:"index",index:e.indexMethod,width:"55",fixed:""}}),i("el-table-column",{attrs:{label:"地域名称",prop:"regionName","min-width":"100",fixed:""}}),i("el-table-column",{attrs:{label:"操作","min-width":"120",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row,n=t.$index;return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.lookClick(o)}}},[e._v("查看")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onEditRole(o)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteMenu(o,n)}}},[e._v(" 删除 ")])]}}])})],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.paginationOptions.pageNo,"page-sizes":e.paginationOptions.pageSizes,"page-size":e.paginationOptions.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationOptions.total,size:"mini"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),i("role-edit-dialog",{ref:"roleEditDialogRef",attrs:{toChild:e.list}}),i("role-data-dialog",{ref:"roleDataDialogRef",attrs:{toChild:e.list}})],1)},n=[],r=i("5530"),s=(i("a434"),i("4eac")),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:e.toChild,visible:e.dialogFormVisible,"close-on-click-modal":!1,"lock-scroll":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[i("div",{staticClass:"register_form_main"},[i("el-row",{staticStyle:{height:"100%"}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content-right"},[i("el-form",{ref:"userEditRef",attrs:{model:e.userEditForm,rules:e.userEditFormRules,size:"mini"}},[i("el-form-item",{attrs:{label:"地域名称 :",prop:"regionName"}},[i("el-cascader",{attrs:{size:"large",options:e.options,clearable:""},model:{value:e.userEditForm.regionName,callback:function(t){e.$set(e.userEditForm,"regionName",t)},expression:"userEditForm.regionName"}})],1)],1)],1)])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onCertain}},[e._v("保 存")]),i("el-button",{attrs:{type:"info",size:"mini"},on:{click:e.dialogClose}},[e._v("取 消")])],1)])],1)},l=[],c=(i("159b"),i("b64b"),i("1276"),i("ac1f"),i("498a"),i("ef6c")),u={props:{toChild:String},data:function(){return{options:c["regionData"],dialogFormVisible:!1,fileType:{fileType:0},nowIndex:-1,userEditForm:{regionName:""},initFormData:{},userEditFormRules:{regionName:[{required:!0,message:"请输入地域名称",trigger:["blur","change"]}]}}},methods:{openDialog:function(e){var t=this;if(console.log(e,"表单的数据"),this.dialogFormVisible=!0,e){var i=JSON.parse(JSON.stringify(e));i.regionName=this.getCityCode(i.regionName),this.initFormData=e,this.$nextTick((function(){t.initForm(e)}))}else console.log("我是新增")},initForm:function(e){var t=this;Object.keys(this.userEditForm).forEach((function(i){t.userEditForm[i]=e[i]?e[i]:null}))},closeDialog:function(){this.resetFormData(),this.resetForm("userEditRef")},dialogClose:function(){this.dialogFormVisible=!1,console.log(this.userEditForm,"取消231取消3131")},resetForm:function(e){this.$refs[e].resetFields(),this.initForm(this.userEditForm),this.resetFormData()},resetFormData:function(){this.ifLogin=!0},onCertain:function(){var e=this;if(console.log("保存了------",this.userEditForm.regionName),this.userEditForm.regionName){for(var t="",i=0;i<this.userEditForm.regionName.length;i++)t=t+c["CodeToText"][this.userEditForm.regionName[i]]+" ";this.userEditForm.regionName=t,console.log("保存了------",this.userEditForm.regionName)}this.initFormData.regionId?(this.userEditForm.regionId=this.initFormData.regionId,this.initFormData=this.userEditForm,console.log(this.userEditForm,"保存执行了"),console.log(this.userEditForm.regionId,this.userEditForm,"this.initFormData.regionId"),this.$refs["userEditRef"].validate((function(t){if(console.log(t,"修改的valid"),!t)return!1;Object(s["b"])(e.userEditForm,e.userEditForm.regionId).then((function(t){console.log(t,"res11111"),t&&t.code&&"00000"===t.code&&(e.$message.success("修改成功！"),e.dialogClose(),console.log("修改成功！"),e.$parent.queryRoles())}))}))):(console.log("增加了..."),this.$refs["userEditRef"].validate((function(t){if(console.log(t,"增加了的valid"),console.log(e.userEditForm,e.userEditForm.regionId,"----------地域"),!t)return!1;Object(s["c"])(e.userEditForm,e.userEditForm.regionId).then((function(t){console.log(t,"增加了...res11111"),t&&t.code&&"00000"===t.code&&(e.dialogFormVisible=!1,e.$message.success("创建成功！"),e.$parent.queryRoles())}))})))},getCityCode:function(e){var t=[];if(""!=e){var i=e.trim().split(" ");1==i.length?t.push(c["TextToCode"][i[0]].code):2==i.length?(t.push(c["TextToCode"][i[0]].code),t.push(c["TextToCode"][i[0]][i[1]].code)):3==i.length&&(t.push(c["TextToCode"][i[0]].code),t.push(c["TextToCode"][i[0]][i[1]].code),t.push(c["TextToCode"][i[0]][i[1]][i[2]].code))}return t}}},d=u,m=(i("c600"),i("2877")),g=Object(m["a"])(d,a,l,!1,null,"136056b3",null),f=g.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:e.toChild,visible:e.dialogFormVisible,"close-on-click-modal":!1,"lock-scroll":""},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[i("div",{staticClass:"register_form_main"},[i("el-row",{staticStyle:{height:"100%"}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content-right"},[i("el-form",{ref:"userEditRef",attrs:{model:e.userEditForm,size:"mini"}},[i("div",{staticClass:"regionbox"},[i("ul",[i("li",[i("span",[e._v("地域名称 : ")]),e._v(" "),i("span",[e._v(e._s(e.userEditForm.regionName))])])])])])],1)])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.dialogClose}},[e._v("取 消")])],1)])],1)},h=[],b={props:{toChild:String},data:function(){return{dialogFormVisible:!1,fileType:{fileType:0},imageUrl:"",nowIndex:-1,userEditForm:{regionName:""},initFormData:{}}},methods:{openDialog:function(e){var t=this;console.log(this.userEditForm,"001001"),this.dialogFormVisible=!0,e&&(this.initFormData=e,this.$nextTick((function(){t.initForm(e)})))},initForm:function(e){var t=this;Object.keys(this.userEditForm).forEach((function(i){t.userEditForm[i]=e[i]?e[i]:null}))},closeDialog:function(){this.resetFormData(),this.resetForm("userEditRef")},dialogClose:function(){this.dialogFormVisible=!1,console.log(this.userEditForm,"确定231确定3131")},resetForm:function(e){this.$refs[e].resetFields(),this.initForm(this.userEditForm),this.resetFormData()},resetFormData:function(){this.ifLogin=!0}}},F=b,E=(i("565e"),Object(m["a"])(F,p,h,!1,null,"821b86e6",null)),v=E.exports,y={components:{RoleEditDialog:f,RoleDataDialog:v},data:function(){return{list:"",formOptions:{regionName:""},tableData:[],paginationOptions:{pageNo:1,pageSizes:[10,20,30,50,100],pageSize:10,layout:"total, sizes, prev, pager, next, jumper"}}},mounted:function(){this.queryRoles()},methods:{queryRoles:function(){var e=this;this.$refs["queryRoleRef"].validate((function(t){if(!t)return!1;var i={records:[Object(r["a"])({},e.formOptions)]};i.current=e.paginationOptions.pageNo,i.size=e.paginationOptions.pageSize,console.log(i,i.current,i.size,"data----xu-----"),Object(s["d"])(i).then((function(t){console.log(t,"res++++++++++"),t&&t.code&&"00000"===t.code&&(e.resetForm("queryRoleRef"),e.tableData=t.data.records,e.paginationOptions.total=t.data.total)}))}))},deleteMenu:function(e,t){var i=this;this.$confirm("此操作将永久删除该地域, 是否继续?","删除地域",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btn-custom-cancel",type:"warning"}).then((function(){i.tableData.splice(t,1),Object(s["a"])(e.regionId).then((function(e){if(console.log(e,"点击确认，发起后台请求，删除"),"00000"==e.code)return i.queryRoles(),i.$message({type:"success",message:"删除成功!"});i.$message({type:"success",message:"删除失败!"})}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},lookClick:function(e){this.$refs.roleDataDialogRef.openDialog(e),this.list="查看地域详情",console.log("我要查看",e)},addClick:function(){this.$refs.roleEditDialogRef.openDialog(),this.list="添加地域",console.log("我要添加")},onEditRole:function(e){this.$refs.roleEditDialogRef.openDialog(e),this.list="修改地域信息",console.log("编辑",e,e.regionId)},resetForm:function(e){this.$refs[e].resetFields()},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.paginationOptions.pageSize=e,this.queryRoles()},handleCurrentChange:function(e){this.paginationOptions.pageNo=e,this.queryRoles()},indexMethod:function(e){return(this.paginationOptions.pageNo-1)*this.paginationOptions.pageSize+e+1}}},C=y,D=(i("60a6"),i("e3e5"),Object(m["a"])(C,o,n,!1,null,"e177da70",null));t["default"]=D.exports},"565e":function(e,t,i){"use strict";i("8f1c")},"60a6":function(e,t,i){"use strict";i("f1cf")},"7d86":function(e,t,i){},"7e3d":function(e,t,i){},"8f1c":function(e,t,i){},c600:function(e,t,i){"use strict";i("7d86")},e3e5:function(e,t,i){"use strict";i("7e3d")},f1cf:function(e,t,i){}}]);